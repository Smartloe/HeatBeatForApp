id,title,description,acceptance_criteria,area,priority,test_mcp,refs,review_initial_requirements,review_regression_requirements,dev_state,review_initial_state,review_regression_state,git_state,notes
TH-001,确认 TuneHub API 范围与错误码映射,核对 TuneHub 接口、鉴权方式、限流策略、字段含义与可用平台范围，形成接口清单与错误码映射。,形成接口清单文档（端点/参数/响应字段）; 明确鉴权方式与限流策略; 输出错误码映射表,api,P0,AUTOSERVER,/Users/chenxiray/projects/HeatBeatForApp/plan/2026-02-03_17-10-40-tunehub-android-music-app.md:16;TuneHub API Documentation.md:1;docs/tunehub-api-scope.md:1,检查接口清单覆盖需求并包含鉴权/限流说明,复核错误码映射与接口清单一致,已完成,已完成,已完成,已提交,picked_reason:优先处理 P0 API 范围与错误码映射，为后续网络层与认证设计提供依据; done_at:2026-02-03; evidence:新增 docs/tunehub-api-scope.md，覆盖接口清单/鉴权限流/错误码映射; validation_limited:仓库无可运行测试或服务环境; manual_test:对照 TuneHub API Documentation.md 核对接口字段; 如有服务可用，使用 curl 访问 /status 与 /api?source=netease&id=123&type=info; risk:low 文档更新不影响运行逻辑; blocked:git commit failed not a git repository; unblocked:git repo initialized; blocked:git add failed index.lock operation not permitted; unblocked:git add permitted
TH-002,定义 Android 架构与模块划分,确定 MVVM/MVI 方案，划分 data/domain/ui 层，定义核心状态流与事件；建立包结构与导航骨架。,架构方案与层次职责明确记录; 包结构与导航骨架创建完成; 核心状态流/事件命名清晰,architecture,P0,AUTOFRONTEND,/Users/chenxiray/projects/HeatBeatForApp/plan/2026-02-03_17-10-40-tunehub-android-music-app.md:17;docs/architecture.md:1;app/src/main/java/com/tunehub/app/ui/navigation/AppNavGraph.kt:1;app/src/main/java/com/tunehub/app/ui/navigation/AppRoute.kt:1,检查层次职责清晰且与导航骨架一致,复核架构说明与实际包结构一致,已完成,已完成,已完成,已提交,picked_reason:优先处理 P0 架构与模块划分，便于后续工程初始化与功能实现; done_at:2026-02-03; evidence:新增 docs/architecture.md 与导航骨架 AppNavGraph/AppRoute，建立包结构目录; validation_limited:无 Android/Gradle 环境，未运行构建或测试; manual_test:完成工程初始化后运行 ./gradlew :app:assembleDebug 并启动应用检查导航路由; risk:low 当前为骨架与文档更新
TH-003,工程初始化与依赖配置,引入 Compose、Retrofit、Coroutines、Coil/Glide、Room/DataStore、ExoPlayer，配置最小可跑样例与主题基线。,项目可编译运行最小样例; 核心依赖可用且版本锁定; 主题基线与基础样式生效,setup,P0,AUTOFRONTEND,/Users/chenxiray/projects/HeatBeatForApp/plan/2026-02-03_17-10-40-tunehub-android-music-app.md:18;build.gradle.kts:1;app/build.gradle.kts:1;app/src/main/java/com/tunehub/app/MainActivity.kt:1,检查依赖清单完整且无冲突,复核样例可运行且主题基线不回退,已完成,已完成,已完成,已提交,picked_reason:优先建立可运行工程与依赖基线，支撑后续功能开发; done_at:2026-02-03; evidence:新增 Gradle 配置与 Compose 主题、MainActivity 最小样例; validation_limited:未安装 Gradle/Android SDK，未运行构建或测试; manual_test:用 Android Studio 导入工程并 Sync；随后运行 app 或执行 ./gradlew :app:assembleDebug; risk:medium 未经实际编译验证依赖兼容性; evidence:补充 Retrofit/Coroutines/Coil/Room/DataStore/Media3 依赖
TH-004,实现网络层与仓库,实现 Retrofit 服务、DTO/Domain 映射、统一错误处理与限流提示（含 429/403），建立 Repository 与缓存策略。,Retrofit 服务可调用并有超时配置; DTO 与 Domain 映射完善; 错误处理含 429/403 提示; Repository 与缓存策略可运行,data,P0,AUTOSERVER,/Users/chenxiray/projects/HeatBeatForApp/plan/2026-02-03_17-10-40-tunehub-android-music-app.md:19;app/src/main/java/com/tunehub/app/data/remote/TuneHubApiService.kt:1;app/src/main/java/com/tunehub/app/data/remote/NetworkClient.kt:1;app/src/main/java/com/tunehub/app/data/repository/TuneHubRepositoryImpl.kt:1;app/src/main/java/com/tunehub/app/data/model/ApiResponse.kt:1;app/src/main/java/com/tunehub/app/domain/repository/TuneHubRepository.kt:1,检查错误处理覆盖 429/403 与常见失败路径,复核 Repository 接口与缓存策略不破坏调用方,已完成,已完成,已完成,已提交,picked_reason:P0 网络层与仓库是后续功能与播放的基础; done_at:2026-02-03; evidence:新增 Retrofit 网络层、DTO/Domain 映射、仓库与内存缓存策略; validation_limited:未运行网络请求或单元测试; manual_test:完成工程同步后调用 TuneHubRepositoryImpl.getSongInfo/searchSongs 并验证 403/429 提示; risk:medium 未实际联调 API 响应与错误码
TH-005,接入 ExoPlayer 与媒体会话,接入 ExoPlayer，支持播放队列、循环模式、后台播放、通知栏控制与播放历史。,支持播放队列与循环模式切换; 后台播放可用且通知栏控制生效; 播放历史可记录与展示,playback,P1,AUTOFRONTEND,/Users/chenxiray/projects/HeatBeatForApp/plan/2026-02-03_17-10-40-tunehub-android-music-app.md:20;app/src/main/java/com/tunehub/app/playback/PlaybackManager.kt:1;app/src/main/java/com/tunehub/app/playback/PlaybackService.kt:1;app/src/main/java/com/tunehub/app/playback/NotificationHelper.kt:1;app/src/main/java/com/tunehub/app/playback/history/PlaybackHistoryStore.kt:1;app/src/main/java/com/tunehub/app/ui/components/PlaybackHistoryList.kt:1,检查媒体会话与通知栏控制覆盖主要动作,复核后台播放与前台切换不回退,已完成,已完成,已完成,已提交,done_at:2026-02-03; evidence:新增 PlaybackManager/Service 与通知栏控制，队列/循环模式与播放历史骨架; validation_limited:未在真机或模拟器验证后台播放与通知; manual_test:安装运行后播放任意媒体，检查通知栏控制与后台播放，切换循环模式并查看历史列表; risk:medium 需设备验证媒体会话与通知
TH-006,实现核心页面与导航,实现 Home/Search/Player/Playlist/Profile/Settings 的 Compose 页面与路由，完成小清新视觉样式与轻量动画。,六个核心页面可访问且路由可切换; 主要视觉样式与轻量动画完成; 页面状态与导航参数一致,ui,P1,AUTOFRONTEND,/Users/chenxiray/projects/HeatBeatForApp/plan/2026-02-03_17-10-40-tunehub-android-music-app.md:21;app/src/main/java/com/tunehub/app/ui/screens/Screens.kt:1;app/src/main/java/com/tunehub/app/ui/navigation/MainScaffold.kt:1;app/src/main/java/com/tunehub/app/MainActivity.kt:1,检查核心页面信息架构与导航一致,复核动画与样式不影响可用性,已完成,已完成,已完成,已提交,done_at:2026-02-03; evidence:实现六大页面 UI 与底部导航骨架，加入轻量动画与样式; validation_limited:未在设备上验证布局与动画效果; manual_test:运行应用并切换六个路由，观察动画与布局是否溢出; risk:medium 需设备尺寸验证
TH-007,实现歌词解析与同步,实现 LRC 解析、滚动高亮与拖动定位，和播放进度双向同步。,LRC 解析正确且可展示; 高亮滚动与播放进度同步; 拖动定位可跳转播放位置,lyrics,P2,AUTOFRONTEND,/Users/chenxiray/projects/HeatBeatForApp/plan/2026-02-03_17-10-40-tunehub-android-music-app.md:22;app/src/main/java/com/tunehub/app/lyrics/LrcParser.kt:1;app/src/main/java/com/tunehub/app/ui/components/LyricsView.kt:1;app/src/main/java/com/tunehub/app/domain/model/LyricLine.kt:1;app/src/main/java/com/tunehub/app/ui/screens/Screens.kt:176,检查歌词同步与拖动定位逻辑正确,复核歌词功能不影响播放稳定性,已完成,已完成,已完成,已提交,picked_reason:补齐歌词解析与同步能力，支撑播放体验; done_at:2026-02-03; evidence:新增 LRC 解析与歌词视图，支持高亮与点击跳转; validation_limited:未与真实播放进度联调; manual_test:加载 LRC 字符串并在播放器界面点击歌词，观察高亮与滚动; risk:medium 需与播放进度对齐验证
TH-008,实现用户认证与安全,实现验证码流程、RSA 登录、Token 存储与刷新，处理登出与异常态。,验证码流程与 RSA 登录可完成; Token 安全存储并支持刷新; 登出与异常态处理清晰,auth,P1,AUTOFRONTEND,/Users/chenxiray/projects/HeatBeatForApp/plan/2026-02-03_17-10-40-tunehub-android-music-app.md:23,检查认证流程与异常态覆盖登录/登出,复核 Token 刷新不影响现有会话,未开始,未开始,未开始,未提交,
TH-009,实现本地存储与收藏,用 Room/DataStore 保存歌单收藏、播放历史、用户偏好与音质选择。,收藏与播放历史可读写; 用户偏好与音质选择可持久化; 数据结构与迁移策略明确（如需）,storage,P1,AUTOFRONTEND,/Users/chenxiray/projects/HeatBeatForApp/plan/2026-02-03_17-10-40-tunehub-android-music-app.md:24,检查数据结构满足收藏/历史/偏好需求,复核数据迁移不会丢失已有记录,未开始,未开始,未开始,未提交,
TH-010,质量保障与发布产物,补充单元/基础 UI 测试，检查性能与耗电，输出 APK 或仓库文档。,新增基础单元/UI 测试并可运行; 性能与耗电检查有记录; 输出 APK 或仓库文档,qa,P2,AUTOFRONTEND,/Users/chenxiray/projects/HeatBeatForApp/plan/2026-02-03_17-10-40-tunehub-android-music-app.md:25,检查测试覆盖核心路径并有记录,复核发布产物生成流程可重复,未开始,未开始,未开始,未提交,
